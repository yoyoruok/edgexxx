# 部署检查清单

在运行量化交易系统之前，请完成以下检查清单。

## 📁 完整文件结构

```
edgex-trading-bot/
│
├── main.py                      # 主程序
├── config.py                    # 配置管理
├── strategy.py                  # 策略模块
├── data_manager.py              # 数据管理
├── order_manager.py             # 订单管理
├── precision_manager.py         # 精度管理
├── rate_limiter.py              # API限速器
├── logger.py                    # 日志管理
├── backtest.py                  # 回测模块
│
├── prepare_backtest_data.py     # 数据准备脚本
├── test_system.py               # 系统测试脚本
│
├── requirements.txt             # Python依赖
├── .env                         # 环境变量（需创建）
├── .env.example                 # 环境变量模板
├── .gitignore                   # Git忽略文件
│
├── README.md                    # 项目文档
├── QUICKSTART.md                # 快速启动指南
├── DEPLOYMENT.md                # 本文件
│
├── logs/                        # 日志目录（自动创建）
│   └── trading_*.log
│
└── data/                        # 数据目录（自动创建）
    ├── BTCUSDT_15m.csv
    ├── BTCUSDT_1h.csv
    └── BTCUSDT_4h.csv
```

## ✅ 部署前检查

### 1. 环境准备

- [ ] Python 3.8+ 已安装
- [ ] pip 已更新到最新版本
- [ ] 所有依赖已安装（`pip install -r requirements.txt`）
- [ ] 网络可以访问 EdgeX API

### 2. 配置检查

- [ ] `.env` 文件已创建
- [ ] API密钥已正确填写
- [ ] 账户ID已验证
- [ ] 环境选择正确（生产/测试网）

### 3. 交易参数检查

在 `config.py` 中检查：

- [ ] 交易对配置正确
- [ ] 仓位大小合理（不超过总资金的30%）
- [ ] 杠杆倍数保守（建议≤5倍）
- [ ] 止损止盈设置合理
- [ ] K线周期选择恰当
- [ ] 精度配置正确（tick_size, size_precision）

### 4. 策略参数检查

- [ ] MA周期合理（25/200 或其他经过回测的参数）
- [ ] 系绳线周期合理（50 或其他经过回测的参数）
- [ ] 止损百分比 ≤ 5%
- [ ] 止盈百分比合理
- [ ] 滑点设置 = 0.1%

### 5. 风控检查

- [ ] 单笔订单金额 ≤ 总资金的5%
- [ ] 总持仓不超过总资金的50%
- [ ] 最大杠杆 ≤ 5倍
- [ ] 设置了止损止盈
- [ ] API限速配置合理

### 6. 测试验证

- [ ] 运行系统测试（`python test_system.py`）
- [ ] 所有测试通过
- [ ] 精度管理器工作正常
- [ ] 策略计算正确
- [ ] 数据获取正常
- [ ] API限速器工作正常

### 7. 回测验证

- [ ] 历史数据已准备（`python prepare_backtest_data.py`）
- [ ] 回测已运行（`python main.py --backtest`）
- [ ] 回测结果可接受（胜率 > 40%, 盈亏比 > 1.5）
- [ ] 最大回撤可承受（< 20%）
- [ ] 不同市场环境下都测试过

## 🚀 首次运行

### 建议顺序

1. **测试网小资金测试（1周）**
   ```bash
   # 在 .env 中配置测试网
   EDGEX_BASE_URL=https://testnet.edgex.exchange
   
   # 运行系统
   python main.py
   ```

2. **生产环境小资金测试（1周）**
   ```bash
   # 在 .env 中配置生产环境
   EDGEX_BASE_URL=https://pro.edgex.exchange
   
   # 最小仓位测试
   position_size=50.0  # 50 USDT
   leverage=2          # 2倍杠杆
   
   # 运行系统
   python main.py
   ```

3. **逐步增加仓位**
   - 第一周: 50 USDT
   - 第二周: 100 USDT（如果表现良好）
   - 第三周: 200 USDT（如果持续盈利）
   - 以此类推...

## 📊 监控要点

### 每日检查

- [ ] 系统运行状态正常
- [ ] 无异常错误日志
- [ ] API连接稳定
- [ ] 持仓状态合理
- [ ] 盈亏在预期范围内

### 每周检查

- [ ] 总盈亏统计
- [ ] 胜率统计
- [ ] 最大回撤记录
- [ ] 策略是否需要调整
- [ ] 系统性能评估

### 关键指标

| 指标 | 健康值 | 警戒值 |
|------|--------|--------|
| 胜率 | > 45% | < 35% |
| 盈亏比 | > 1.8 | < 1.2 |
| 最大回撤 | < 15% | > 25% |
| 日均交易次数 | 2-5次 | > 10次 |
| API错误率 | < 1% | > 5% |

## ⚠️ 风险提示

### 立即停止系统的情况

- 连续亏损超过总资金的10%
- 系统出现严重bug
- API频繁报错
- 账户余额异常
- 出现无法解释的订单

### 应急措施

1. **立即操作**
   ```bash
   # Ctrl+C 停止程序
   # 或
   pkill -f main.py
   ```

2. **手动平仓**
   - 登录EdgeX交易所
   - 手动平掉所有持仓
   - 撤销所有订单

3. **问题排查**
   - 检查日志文件
   - 验证策略逻辑
   - 检查市场环境
   - 分析交易记录

## 🔧 优化建议

### 参数优化

```python
# 在不同市场环境测试以下参数组合
MA_COMBINATIONS = [
    (20, 150),
    (25, 200),
    (30, 250),
]

ROPE_PERIODS = [30, 40, 50, 60]

STOP_LOSS = [0.015, 0.02, 0.025]  # 1.5%, 2%, 2.5%
TAKE_PROFIT = [0.04, 0.05, 0.06]  # 4%, 5%, 6%
```

### 性能优化

- [ ] 定期清理日志文件
- [ ] 优化数据缓存策略
- [ ] 调整API请求频率
- [ ] 监控系统资源使用

## 📈 进阶功能

### 后续可添加的功能

1. **多策略并行**
   - 不同周期的策略
   - 不同参数的策略
   - 策略组合优化

2. **智能仓位管理**
   - 动态调整仓位
   - 基于波动率的仓位
   - 金字塔加仓

3. **高级风控**
   - 动态止损止盈
   - 时间止损
   - 分级风控

4. **实时监控**
   - Web界面
   - 微信/邮件通知
   - 实时性能指标

5. **机器学习优化**
   - 参数自动优化
   - 市场状态识别
   - 预测模型集成

## 📞 支持

遇到问题时：

1. 查看日志文件 `logs/trading_*.log`
2. 运行测试脚本 `python test_system.py`
3. 参考 EdgeX 官方文档
4. 检查本项目的 README.md 和 QUICKSTART.md

---

**最后提醒**: 量化交易有风险，投资需谨慎！